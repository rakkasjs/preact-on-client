import{j as u,a as n}from"./jsx-runtime-4e3661cc.js";import{a as h,b as l,r as p,c as _}from"./index-2ba2cd1d.js";const g="_item_urmsp_1",b="_done_urmsp_12",f="_input_urmsp_16",k="_buttons_urmsp_28",d={item:g,done:b,input:f,buttons:k},y=({todo:t,refetch:c})=>{const[e,i]=h({text:t.text,editing:!1}),{id:o}=t,{mutate:s}=l(async a=>{const x=await p(["1",0,[o,a]]);return c(),x}),{mutate:m}=l(async()=>{await p(["1",1,[o]]),c()});return u("li",{className:d.item,children:[!e.editing&&u("label",{children:[n("input",{type:"checkbox",checked:t.done,onChange:a=>s({done:a.target.checked})})," ",n("span",{className:t.done?d.done:void 0,children:t.text})," "]}),e.editing&&n("input",{className:d.input,autoFocus:!0,value:e.text,onChange:a=>i({text:a.target.value,editing:!0}),onKeyDown:a=>{a.key==="Enter"?(i({text:t.text,editing:!1}),s({text:e.text})):a.key==="Escape"&&i({text:t.text,editing:!1})}}),u("span",{className:d.buttons,children:[!t.done&&!e.editing&&n("button",{type:"button",onClick:()=>i({text:t.text,editing:!0}),children:"Edit"}),t.done&&n("button",{type:"button",onClick:()=>m(),children:"Delete"}),e.editing&&e.text!==t.text&&n("button",{type:"button",onClick:async()=>{i({text:t.text,editing:!1}),s({text:e.text})},children:"Save"}),e.editing&&n("button",{type:"button",onClick:()=>i({text:t.text,editing:!1}),children:"Cancel"})]})]},t.id)},v="_todoList_rkehu_1",C="_addButton_rkehu_5",N="_p_rkehu_21",S="_input_rkehu_25",r={todoList:v,addButton:C,p:N,input:S};function B(){const{data:t,refetch:c}=_(["0",0,[]],{refetchOnWindowFocus:!0,refetchOnReconnect:!0}),[e,i]=h(""),{mutate:o}=l(async()=>{await p(["0",1,[e]]),c()});return u("main",{id:"todo",children:[n("h1",{children:"Todo"}),n("p",{children:"This is a simple todo application that demonstrates data fetching."}),n("ul",{className:r.todoList,children:t.map(s=>n(y,{todo:s,refetch:c},s.id))}),u("p",{className:r.p,children:[n("input",{className:r.input,value:e,onChange:s=>i(s.target.value)}),n("button",{type:"button",className:r.addButton,disabled:!e,onClick:()=>o(),children:"Add"})]})]})}export{B as default};
